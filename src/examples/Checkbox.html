<!--
og-checkbox
-->
<og-card>
    <og-card-header>Checkbox</og-card-header>
    <og-card-body>
        <p>Default checkbox</p>
        <og-checkbox></og-checkbox>
        <p>Default checkbox with a label</p>
        <og-checkbox label="Checkbox"></og-checkbox>
        <p>Default checkbox, checked</p>
        <og-checkbox label="Checkbox" checked></og-checkbox>
        <p>Default checkbox, disabled</p>
        <og-checkbox label="Checkbox" disabled></og-checkbox>
        <p>Default checkbox, checked & disabled</p>
        <og-checkbox label="Checkbox" disabled></og-checkbox>
        <p>Indeterminate checkbox</p>
        <div>
            <og-checkbox id="og-checkgroup-parent" label="Group Checkbox"></og-checkbox>
            <div style="padding-left: 2rem">
                    <og-checkbox class="og-checkgroup-child" label="Checkbox #1" ></og-checkbox> <br>
                    <og-checkbox class="og-checkgroup-child" label="Checkbox #2" ></og-checkbox> <br>
                    <og-checkbox class="og-checkgroup-child" label="Checkbox #3" checked></og-checkbox>
                </div>
            </div>
    </og-card-body>
</og-card>
<script>
    const checkboxes = document.querySelectorAll('og-checkbox');
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('changed', (e) => {
            console.log('Checkbox Active', e.detail);
        });
    });

    const groupParent = document.querySelector('#og-checkgroup-parent');
    const groupChildren = Array.from(document.querySelectorAll('.og-checkgroup-child'));
    const groupChildrenControl = [];

    function updateGroupParent() {
        const checkedChildren = groupChildren.filter(
            (child) => child.checked === true
        )
        if (checkedChildren.length === 0) {
            groupParent.checked = false;
            groupParent.indeterminate = false;
            return;
        }

        if (checkedChildren.length > 0 && checkedChildren.length < groupChildren.length) {
            groupParent.checked = false;
            groupParent.indeterminate = true;
            return;
        }

        if (checkedChildren.length === groupChildren.length) {
            groupParent.checked = true;
            groupParent.indeterminate = false;
            return;
        }
    }

    groupParent.addEventListener('changed', (e) => {
        console.log('PARENT WAS CHANGED', e.detail);
        groupChildren.forEach(
            (child) => {
                child.checked = e.detail;
            }
        )
    });

    groupChildren.forEach(
        (child, index) => {
            groupChildrenControl[index] = child.checked;
            child.addEventListener('changed', (e) => {
                groupChildrenControl[index] = e.target;
                updateGroupParent();
                console.log('CHILDREN', child.checked, groupChildrenControl);
            });
        }
    )

    document.onload = updateGroupParent();

</script>
